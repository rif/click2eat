{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans 'Your profile' %}{% endblock %}

{% block content %}
<ul>
<li>{% trans 'First name' %}: {{ profile.first_name }}</li>
<li>{% trans 'Last name' %}: {{ profile.last_name }}</li>
<li>{% trans 'Birth date' %}: {{ profile.birth_date }}</li>
<li>{% trans 'Phone' %}: {{ profile.phone }}</li>
<li>{% trans 'Sex' %}: {{ profile.sex }}</li>
<li>{% trans 'Newsletter' %}: {{ profile.newsletter }}</li>
<li>{% trans 'Communication' %}: {% for com in profile.communication.iterator %}{{ com.name }} {% endfor %}</li>
</ul>

<a href="{% url profiles_edit_profile %}">{% trans 'Edit' %}</a><nbsp>
<a href="{% url restaurant:index %}">{% trans 'Home' %}</a>
<br/>
<a href="{% url order:list %}">{% trans 'Order History' %}</a>
<br/>
{% if profile %}
<div id="delivery_addresses">
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>{% trans 'Address' %}</th>
            <th>{% trans 'Primary' %}</th>
            <th>{% trans 'Operation' %}</td>
        </tr>
    </thead>
    <tbody>
        {% for addr in profile.user.deliveryaddress_set.iterator %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{% url userprofiles:address_detail addr.id %}">{{ addr }}</a></td>
            <td>{{ addr.primary }}</td>
            <td><a href="{% url userprofiles:delete_address addr.id %}">{% trans 'Delete' %}</a> <a href="{% url userprofiles:update_address addr.id %}">{% trans 'Edit' %}</a></td>
        </tr>
        {% empty %}
        <tr><td>{% trans 'You have not defined any delivery address.' %} <a href="{% url userprofiles:create_address %}">{% trans 'Add one now' %}</a></td></tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endif %}
<br/>
<a href="{% url userprofiles:create_address %}">Add delivery address</a>
{% endblock %}
