{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans 'Wheel of fortune' %}{% endblock %}
{% block description %}{% trans 'If you are undecided about what to eat today, here you can let the fate decide. Just spin the wheel an find out what the it was meant for you today.' %}{% endblock %}

{% block script-links %}
<script src="{{ STATIC_URL }}js/jquery.timers.js" type="text/javascript"></script>
{% endblock %}

{% block scripts %}
<script type="text/javascript">
$(function(){
    $("#event").click(function() {
        if ($("#plate").attr("class") == "processing") return;
        $("#selected_plate").hide();
        $("#plate").attr("class", "processing");
        $("#event").attr("disabled", true);
        $(this).oneTime(1000, function() {
             $.get("{% url wheel:fortune_ajax %}", function(data){
                $("#selected_plate").html(data);
                 $("#selected_plate").show(); 
             });
             $("#plate").attr("class", "generic");
             $("#event").attr("disabled", false);
         });
    });
});
function addMotd(href, redir) {
       $.get(href, function(){
          window.location = redir;
       });
}
</script>
{% endblock %}

{% block content %}
<div class="content_area">
  <div class="title"><h1 class="light_green">{% trans 'Wheel of fortune' %}</h1></div><br>
  
  <div id="lucky_plate_text">
    <p>{% trans 'If you are undecided about what to eat today, here you can let the fate decide. Just spin the wheel an find out what the it was meant for you today.' %}</p>
    <p>{% trans 'Press the button once, let is spinn, press it again and set the table!' %}</p>
  </div>

  <div id="lucky_plate">
    <div id="plate" class="start"></div>
    <div id="control"><div id="event">{% trans 'START' %}</div></div>
    <div id="selected_plate" style="display:none">?</div>
  </div>
  <div class="clear"></div>
</div>
{% endblock %}
