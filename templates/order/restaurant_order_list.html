{% extends 'admin/base_site.html' %}
{% load i18n %}

{% block title %}{% trans 'List current orders' %}{% endblock %}

{% block extrastyle %}
<link href="{{ STATIC_URL }}css/css3buttons.css" media="screen, projection" rel="stylesheet" type="text/css" />
<style type="text/css">
  body {font-size: 16px;}
  tr>td {font-size: 1.2em;}
  tr.red>td>a {color: indianred;}
  tr.yellow>td>a {color: #F2D61A;}
  tr.green>td>a {color: #008000;}
  .details{line-height:1.3em;}
  .paid-with-bonus{color: indianred;}
</style>
{% endblock %}

{% block extrahead %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
<script>!window.jQuery && document.write('<script src="{{ STATIC_URL }}js/jquery-1.6.4.min.js" type="text/javascript"><\/script>')</script>
<script src="{{ STATIC_URL }}js/jquery.timers.js" type="text/javascript"></script>
<script type="text/javascript">  
  $(function(){    
    $("#order-list").everyTime(1000*30,function(i) { //every 30 seconds
          $(this).fadeOut();
          $(this).load("{% url order:restaurant_list_ajax unit_id %}", function(){
            $(this).fadeIn();
          });
    });
    $("#order-list").delegate(".order-link", "click", function(){
      var orderinfo = $("#order-info");
      orderinfo.slideUp();
      orderinfo.load($(this).attr("href"), function(){orderinfo.slideDown();});
      return false;
    });
    $("#show-order-history").click(function(){
      if ($("#orderhistory").text()==''){
        $("#orderhistory").load("{% url order:restaurant_list_history_ajax unit_id %}", function(){
          $("#orderhistory").slideDown();
        });
      } else {
        $("#orderhistory").slideToggle();
      }
      return false;
    });
  });
</script>
{% endblock %}

{% block content %}
<a class="button lefta" id="show-order-history" href="{% url order:restaurant_list_history_ajax unit_id %}">{% trans 'Show order history' %}</a>
<a class="button righta" href="{% url order:restaurant_list_csv unit_id %}">{% trans 'Download all orders (CSV)' %}</a>
<div class="clear"></div>

<div id="orderhistory" style="dispay:none;"></div>
<div class="container-grid">
    <div class="column span-28">
		<div id="order-list">
  		{% include 'order/restaurant_order_list_div.html' %}
		</div>
	</div>
	<div class="column span-6 last">
		<div id="order-info" class="tools"  style="position:absolute; right:-450px; padding:25px; border: 1px dotted lightgray;"></div>
	</div>
</div>
{% endblock %}
