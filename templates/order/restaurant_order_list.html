{% extends 'admin/base_site.html' %}
{% load i18n %}

{% block title %}{% trans 'List current orders' %}{% endblock %}

{% block extrastyle %}
<style type="text/css">
  body {font-size: 14px;}
  tr>td {font-size: 1.4em;}
  tr.red>td>a {color: indian;}
  tr.yellow>td>a {color: #F2D61A;}
  tr.green>td>a {color: #008000;}
</style>
{% endblock %}

{% block script-links %}

{% endblock %}

{% block extrahead %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
<script src="{{ STATIC_URL }}js/jquery.timers.js" type="text/javascript"></script>
<script type="text/javascript">
  function orderDisplay(){
    $(".order-link").click(function(e){
      var orderinfo = $("#order-info");
      orderinfo.slideUp();
      orderinfo.load($(this).attr("href"), function(){orderinfo.slideDown();});
      e.preventDefault();
    });
  }
  $(function(){
    orderDisplay();
    $("#order-list").everyTime(1000*30,function(i) { //every 30 seconds
          $(this).fadeOut();
          $(this).load("{% url order:restaurant_list_ajax unit_id %}", function(){
            orderDisplay();
            $(this).fadeIn();
          });
    });
  });
</script>
{% endblock %}

{% block content %}
<div class="general_button">
  <a href="{% url order:restaurant_list_csv unit_id %}">{% trans 'Download all orders (CSV)' %}</a>
</div>
<div class="clear"></div>
<div id="order-info"></div>
<div id="order-list">
  {% include 'order/restaurant_order_list_div.html' %}
</div>
{% endblock %}
