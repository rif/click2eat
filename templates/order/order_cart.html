{% load i18n %}
{% load order_tags %}
<script type="text/javascript">

$(function(){
  $(".remove-orderitem", "#cart-rif-table").click(function(e){
    var row = $(this).parents("tr");
    $.get($(this).attr("href"), function(resp){
       if(resp=="nook") {
          row.fadeOut();
          if(typeof getAvailableToppings == 'function') {
            /* check if function is defined in this context*/
             getAvailableToppings();
          }
       } else{
          $(".count", row).text(resp);
       }
       $("#{{cartname}}_subtotal").load($("#{{cartname}}_subtotal").attr("href"));
    });
    e.preventDefault();
  });
})

</script>
<table id="cart-{{ cartname }}-table"> 
  <tr class="header"> 
    <th class="item">{% trans 'Item' %}</th> 
    <th class="count">{% trans 'Count' %}</th> 
    <th class="price">{% trans 'Price' %}</th> 
  </tr> 
  {% for oi in oil %}
  <tr class="{% cycle 'odd' 'even' %}"> 
    <td class="item">{{ oi.item.name_def }}</td> 
    <td class="count">{{ oi.count }}</td> 
    <td class="price">{{ oi.old_price }}</td>
    <td><a class="remove-orderitem" href="{% url order:remove_item oi.id %}">x</a></td>
  </tr> 
  {% empty %}
  <tr> 
    <td class="placeholder">{% trans 'Click menu items to fill the plate' %}</td> 
  </tr>
  {% endfor %}
</table> 


{% trans 'Subtotal' %}: <span id="{{cartname}}_subtotal" href="{% url order:get_subtotal order.unit.id cartname %}">{% get_cart_subtotal %}</span>


